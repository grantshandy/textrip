<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Texture Ripper</title>
  </head>
  <body>
    <h2>Texture Ripper</h2>
    <p>Get perspective accurate textures for 3D modeling and graphics from any image in an easy to use website.</p>
    
    <input type='file' id='button'>
    <img id="preview">
    <p id="resolution"></p>

    <script type="module">
      import init, {resolution} from './wasm/wasm.js';

      (async () => {
        await init();

        var button = document.getElementById('button');

        button.addEventListener('change', (event) => {
          let file = event.target.files[0];
          const reader = new FileReader();
          reader.readAsArrayBuffer(file);

          reader.onloadend = function() {
            let x = reader.result;
            console.log(x);

            let uint8view = new Uint8Array(x);
            let res = resolution(uint8view);
            document.getElementById('resolution').innerHTML = res;
          }
        });
      })();
    </script>
  </body>
</html>

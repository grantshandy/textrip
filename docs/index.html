<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Texture Ripper</title>
  </head>
  <body>
    <h2>Texture Ripper</h2>
    <p>Get perspective accurate textures for 3D modeling and graphics from any image in an easy to use website.</p>
    
    <!-- <form enctype="multipart/form-data" action="/upload/image" method="post"> -->
      <input type='file' id='button'>
    <!-- </form> -->

    <img id="preview">

    <p id="resolution"></p>

    <script type="module">
      import init, {resolution} from './wasm/wasm.js';

      (async () => {
        await init();

        let button = document.getElementById('button');

        button.addEventListener('change', (event) => {
          let fileList = event.target.files;
          
          const reader = new FileReader();

          reader.readAsArrayBuffer(fileList[0]);

          reader.onloadend = function() {
            let x = reader.result;
            console.log(x);

            let int8view = new Uint8Array(x);

            let res = resolution(int8view);
            document.getElementById('resolution').innerHTML = res;
          }
        });
      })();
    </script>
  </body>
</html>
